{"version":3,"sources":["componets/List/index.jsx","componets/Search/index.jsx","App.jsx","index.js"],"names":["List","state","users","isFirst","isLoading","err","PubSub","subscribe","msg","stateObj","console","log","setState","this","className","style","color","map","userObj","rel","href","html_url","target","alt","src","avatar_url","width","login","id","Component","Search","search","keyWord","keyWordElement","value","trim","publish","axios","get","then","response","data","items","error","alert","handleKeyUp","event","keyCode","onKeyUp","ref","c","type","placeholder","onClick","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"2QAIqBA,E,4MAEjBC,MAAQ,CACJC,MAAO,GACPC,SAAS,EACTC,WAAW,EACXC,IAAK,I,uDAIT,WAAoB,IAAD,OACfC,IAAOC,UAAU,UAAS,SAACC,EAAIC,GAC3BC,QAAQC,IAAI,kDACZD,QAAQC,IAAIH,EAAIC,GAChB,EAAKG,SAASH,Q,oBAItB,WAAU,IAAD,EACsCI,KAAKZ,MAAxCC,EADH,EACGA,MAAOC,EADV,EACUA,QAASC,EADnB,EACmBA,UAAWC,EAD9B,EAC8BA,IAEnC,OACI,qBAAKS,UAAU,MAAf,SAEQX,EAAU,8IACNC,EAAY,sEACRC,EAAM,oBAAIU,MAAO,CAAEC,MAAO,OAApB,SAA8BX,IAChCH,EAAMe,KAAI,SAACC,GACP,OACI,sBAAsBJ,UAAU,OAAhC,UACI,mBAAGK,IAAI,aAAaC,KAAMF,EAAQG,SAAUC,OAAO,SAAnD,SACI,qBAAKC,IAAI,gBAAgBC,IAAKN,EAAQO,WAAYV,MAAO,CAAEW,MAAO,aAEtE,mBAAGZ,UAAU,YAAb,SAA0BI,EAAQS,UAJ5BT,EAAQU,a,GA7BxBC,a,wBCDbC,E,4MAEjBC,OAAS,WAAI,IAMoBC,EANpB,eAMFC,eAAgBC,MACvBxB,QAAQC,IAAIqB,GAGU,KAAnBA,EAAQG,QAOXzB,QAAQC,IAAI,oDACZL,IAAO8B,QAAQ,SAAS,CAACjC,SAAQ,EAAMC,WAAU,IAGjDiC,IAAMC,IAAN,gDAAmDN,IAAWO,MAC1D,SAAAC,GAGI9B,QAAQC,IAAI,oDACZL,IAAO8B,QAAQ,SAAS,CAAChC,WAAU,EAAMF,MAAMsC,EAASC,KAAKC,QAC7DhC,QAAQC,IAAI,qBAAM6B,EAASC,SAE/B,SAAAE,GAGIjC,QAAQC,IAAI,oDACZL,IAAO8B,QAAQ,SAAS,CAAChC,WAAU,EAAMC,IAAIsC,IAC7CjC,QAAQC,IAAI,qBAAMgC,OAvBtBC,MAAM,yC,EA8BdC,YAAc,SAACC,GAAS,IACbC,EAAkBD,EAAlBC,QAAQzB,EAAUwB,EAAVxB,OAGA,KAAZyB,IAGwB,KAAxBzB,EAAOY,MAAMC,QAMhBzB,QAAQC,IAAIW,EAAOY,MAAOa,GAE1B,EAAKhB,UAPDa,MAAM,0C,4CAUd,WAAU,IAAD,OACL,OACI,8BACI,0BAAS9B,UAAU,YAAnB,UACI,oBAAIA,UAAU,oBAAd,4CACA,gCACI,uBAAOkC,QAASnC,KAAKgC,YAAaI,IAAK,SAAAC,GAAC,OAAI,EAAKjB,eAAiBiB,GAAGC,KAAK,OAAOC,YAAY,2DADjG,OAEI,wBAAQC,QAASxC,KAAKkB,OAAtB,sC,GApEYF,aCCfyB,E,4JACnB,WACE,OACE,qBAAKxC,UAAU,MAAf,SACE,sBAAKA,UAAU,YAAf,UACE,wFAAkB,uBAClB,cAAC,EAAD,IACA,cAAC,EAAD,a,GAPuBe,aCAjC0B,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.a8ebac20.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport PubSub from 'pubsub-js'\r\nimport './index.css'\r\n\r\nexport default class List extends Component {\r\n\r\n    state = {\r\n        users: [],         // 初始化狀態，users初始化為數組\r\n        isFirst: true,     // 是否為第一次打開頁面\r\n        isLoading: false,  // 標識是否處於加載中\r\n        err: '',           // 存儲請求相關的錯誤信息\r\n    };\r\n\r\n    // 組件掛載時\r\n    componentDidMount(){\r\n        PubSub.subscribe('update',(msg,stateObj)=>{\r\n            console.log('List組件收到數據了');\r\n            console.log(msg,stateObj);\r\n            this.setState(stateObj);\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { users, isFirst, isLoading, err } = this.state;\r\n\r\n        return (\r\n            <div className=\"row\">\r\n                {\r\n                    isFirst ? <h2>歡迎使用，請輸入關鍵字，隨後點擊搜尋</h2> :\r\n                        isLoading ? <h2>努力加載中......</h2> :\r\n                            err ? <h2 style={{ color: 'red' }}>{err}</h2> :\r\n                                users.map((userObj) => {\r\n                                    return (\r\n                                        <div key={userObj.id} className=\"card\">\r\n                                            <a rel=\"noreferrer\" href={userObj.html_url} target=\"_blank\">\r\n                                                <img alt=\"head_portrait\" src={userObj.avatar_url} style={{ width: '100px' }} />\r\n                                            </a>\r\n                                            <p className=\"card-text\">{userObj.login}</p>\r\n                                        </div>\r\n                                    )\r\n                                }\r\n                                )\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport PubSub from 'pubsub-js'\r\nimport axios from 'axios'\r\nexport default class Search extends Component {\r\n\r\n    search = ()=>{\r\n        \r\n        // 獲取用戶的輸入\r\n        //console.log(this.keyWordElement.value);\r\n\r\n        // 連續解構賦值+重命名\r\n        const {keyWordElement:{value:keyWord}} = this;\r\n        console.log(keyWord);\r\n\r\n        // 不能為空\r\n        if(keyWord.trim() === ''){\r\n            alert('輸入不能為空');\r\n            return;\r\n        }\r\n\r\n        // 發送請求前通知List更新狀態\r\n        //this.props.updateAppState({isFirst:false,isLoading:true});\r\n        console.log('Search組件發佈消息了');\r\n        PubSub.publish('update',{isFirst:false,isLoading:true});\r\n        \r\n        // 發送網絡請求\r\n        axios.get(`https://api.github.com/search/users?q=${keyWord}`).then(\r\n            response => {\r\n                // 請求成功後通知List更新狀態\r\n                //this.props.updateAppState({isLoading:false,users:response.data.items});\r\n                console.log('Search組件發佈消息了');\r\n                PubSub.publish('update',{isLoading:false,users:response.data.items});\r\n                console.log('成功了',response.data);\r\n            },\r\n            error => {\r\n                // 請求失敗後通知App更新狀態\r\n                //this.props.updateAppState({isLoading:false,err:error})\r\n                console.log('Search組件發佈消息了');\r\n                PubSub.publish('update',{isLoading:false,err:error});\r\n                console.log('失敗了',error);\r\n            }\r\n        )\r\n    }\r\n\r\n    // 鍵盤事件的回調\r\n    // 可以點擊搜尋按鍵 或 直接按下Enter\r\n    handleKeyUp = (event)=>{\r\n        const {keyCode,target} = event;\r\n\r\n        // 判斷是否為Enter按鍵\r\n        if(keyCode !== 13) return;\r\n\r\n        // 不能為空\r\n        if(target.value.trim() === ''){\r\n            alert('輸入不能為空');\r\n            return;\r\n        }\r\n\r\n        // 打印所按的值、按鍵的值\r\n        console.log(target.value, keyCode);\r\n\r\n        this.search();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <section className=\"jumbotron\">\r\n                    <h3 className=\"jumbotron-heading\">搜尋Github用戶</h3>\r\n                    <div>\r\n                        <input onKeyUp={this.handleKeyUp} ref={c => this.keyWordElement = c} type=\"text\" placeholder=\"輸入關鍵詞點擊搜尋\" />&nbsp;\r\n                        <button onClick={this.search}>搜尋</button>\r\n                    </div>\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\nimport List from './componets/List';\nimport Search from './componets/Search';\n\nexport default class App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"container\">\n          <h1>使用消息訂閱的方式</h1><br/>\n          <Search />\n          <List />\n        </div>\n      </div>\n    );\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}